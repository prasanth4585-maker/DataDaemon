<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black Hat - System Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #0ff;
            overflow: hidden;
            height: 100vh;
        }

        @media (max-width: 768px) {
            body {
                overflow-y: auto;
            }
        }

        .container {
            display: grid;
            grid-template-columns: 250px 1fr 250px;
            grid-template-rows: 80px 1fr;
            height: 100vh;
            gap: 20px;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
                height: auto;
                padding: 10px;
                gap: 10px;
            }
        }

        .header {
            grid-column: 1 / -1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #0ff;
            padding-bottom: 10px;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 10px;
                padding-bottom: 15px;
            }
        }

        .logo {
            font-size: 32px;
            font-weight: bold;
            text-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            letter-spacing: 3px;
        }

        @media (max-width: 768px) {
            .logo {
                font-size: 24px;
            }
        }

        .datetime {
            text-align: right;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .datetime {
                text-align: center;
                font-size: 12px;
            }
        }

        .left-panel, .right-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .left-panel, .right-panel {
                grid-column: 1;
                gap: 10px;
            }
            
            .right-panel {
                order: 3;
            }
        }

        .panel {
            background: rgba(0, 255, 255, 0.05);
            border: 2px solid #0ff;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            position: relative;
        }

        .panel::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, transparent, #0ff, transparent);
            border-radius: 10px;
            opacity: 0;
            animation: panelGlow 3s infinite;
            z-index: -1;
        }

        @keyframes panelGlow {
            0%, 100% { opacity: 0; }
            50% { opacity: 0.3; }
        }

        .panel-title {
            font-size: 12px;
            text-transform: uppercase;
            margin-bottom: 10px;
            letter-spacing: 2px;
            color: #0ff;
            text-shadow: 0 0 5px #0ff;
        }

        .circle-stat {
            width: 120px;
            height: 120px;
            margin: 10px auto;
            position: relative;
        }

        .circle-stat svg {
            transform: rotate(-90deg);
        }

        .circle-stat circle {
            fill: none;
            stroke: #0ff;
            stroke-width: 3;
            stroke-dasharray: 314;
            stroke-dashoffset: 314;
            filter: drop-shadow(0 0 5px #0ff);
        }

        .stat-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px #0ff;
        }

        .center-chat {
            display: flex;
            flex-direction: column;
            background: rgba(0, 255, 255, 0.03);
            border: 2px solid #0ff;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.4);
            overflow: hidden;
            position: relative;
        }

        @media (max-width: 768px) {
            .center-chat {
                grid-column: 1;
                order: 2;
                min-height: 500px;
                max-height: 600px;
            }
        }

        .center-chat::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.1) 0%, transparent 70%);
            animation: rotate 10s linear infinite;
            pointer-events: none;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .chat-header {
            padding: 20px;
            border-bottom: 1px solid #0ff;
            text-align: center;
            background: rgba(0, 255, 255, 0.05);
        }

        .chat-header h2 {
            font-size: 24px;
            text-shadow: 0 0 10px #0ff;
            letter-spacing: 3px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: rgba(0, 255, 255, 0.1);
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #0ff;
            border-radius: 4px;
            box-shadow: 0 0 10px #0ff;
        }

        .message {
            padding: 15px;
            border-radius: 10px;
            max-width: 70%;
            animation: messageSlide 0.3s ease-out;
            position: relative;
            word-wrap: break-word;
        }

        @media (max-width: 768px) {
            .message {
                max-width: 85%;
                padding: 12px;
                font-size: 13px;
            }
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            align-self: flex-end;
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid #0ff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }

        .message.bot {
            align-self: flex-start;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid #0ff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
        }

        .message::before {
            content: attr(data-sender);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: block;
            margin-bottom: 5px;
            opacity: 0.7;
        }

        .chat-input-area {
            padding: 20px;
            border-top: 1px solid #0ff;
            background: rgba(0, 255, 255, 0.05);
            display: flex;
            gap: 10px;
        }

        @media (max-width: 768px) {
            .chat-input-area {
                padding: 15px 10px;
                flex-direction: row;
                gap: 8px;
            }
        }

        .chat-input {
            flex: 1;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #0ff;
            border-radius: 8px;
            padding: 12px 15px;
            color: #0ff;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            outline: none;
            transition: all 0.3s;
        }

        @media (max-width: 768px) {
            .chat-input {
                padding: 10px;
                font-size: 12px;
            }
        }

        .chat-input:focus {
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            background: rgba(0, 0, 0, 0.7);
        }

        .chat-input:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .send-btn {
            background: rgba(0, 255, 255, 0.2);
            border: 2px solid #0ff;
            border-radius: 8px;
            padding: 12px 30px;
            color: #0ff;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        @media (max-width: 768px) {
            .send-btn {
                padding: 10px 20px;
                font-size: 12px;
                letter-spacing: 1px;
                flex-shrink: 0;
            }
        }

        .send-btn:hover:not(:disabled) {
            background: rgba(0, 255, 255, 0.4);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
            transform: translateY(-2px);
        }

        .send-btn:active:not(:disabled) {
            transform: translateY(0);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .menu-item {
            padding: 10px;
            border-left: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .menu-item:hover {
            border-left-color: #0ff;
            padding-left: 15px;
            text-shadow: 0 0 10px #0ff;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            font-size: 12px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #0ff;
            box-shadow: 0 0 10px #0ff;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #0ff;
            border-radius: 50%;
            animation: float 10s infinite;
            box-shadow: 0 0 5px #0ff;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }

        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .login-box {
            background: rgba(0, 255, 255, 0.05);
            border: 2px solid #0ff;
            border-radius: 15px;
            padding: 40px;
            width: 400px;
            box-shadow: 0 0 40px rgba(0, 255, 255, 0.5);
            animation: loginAppear 0.5s ease-out;
        }

        @media (max-width: 768px) {
            .login-box {
                width: 90%;
                max-width: 350px;
                padding: 30px 20px;
            }
        }

        @keyframes loginAppear {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .login-title {
            font-size: 32px;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 0 0 15px #0ff;
            letter-spacing: 3px;
        }

        .login-subtitle {
            text-align: center;
            font-size: 14px;
            margin-bottom: 30px;
            opacity: 0.7;
        }

        .input-group {
            margin-bottom: 20px;
            position: relative;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .password-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            cursor: pointer;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0ff;
            opacity: 0.7;
            transition: all 0.3s;
            user-select: none;
        }

        .password-toggle:hover {
            opacity: 1;
            text-shadow: 0 0 10px #0ff;
        }

        .password-toggle svg {
            width: 20px;
            height: 20px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .login-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #0ff;
            border-radius: 8px;
            padding: 12px 15px;
            color: #0ff;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            outline: none;
            transition: all 0.3s;
        }

        .login-input:focus {
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            background: rgba(0, 0, 0, 0.7);
        }

        .login-btn {
            width: 100%;
            background: rgba(0, 255, 255, 0.2);
            border: 2px solid #0ff;
            border-radius: 8px;
            padding: 15px;
            color: #0ff;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }

        .login-btn:hover {
            background: rgba(0, 255, 255, 0.4);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
            transform: translateY(-2px);
        }

        .error-message {
            color: #f00;
            font-size: 12px;
            text-align: center;
            margin-top: 10px;
            display: none;
        }

        .hidden {
            display: none;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }

        .logout-btn {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid #f00;
            border-radius: 5px;
            padding: 5px 15px;
            color: #f00;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-left: 10px;
        }

        .logout-btn:hover {
            background: rgba(255, 0, 0, 0.4);
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
        }

        .developer-credit {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 255, 255, 0.05);
            border: 1px solid #0ff;
            border-radius: 5px;
            padding: 5px 12px;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
            z-index: 100;
            opacity: 0.7;
        }

        @media (max-width: 768px) {
            .developer-credit {
                bottom: 10px;
                right: 10px;
                padding: 4px 8px;
                font-size: 8px;
            }
        }

        .developer-credit::before {
            content: '◢';
            margin-right: 5px;
            color: #0ff;
            font-size: 8px;
        }

        .developer-credit::after {
            content: '◣';
            margin-left: 5px;
            color: #0ff;
            font-size: 8px;
        }

        .dev-name {
            font-weight: bold;
            color: #0ff;
        }

        .globe-container {
            width: 100%;
            height: 200px;
            position: relative;
            cursor: grab;
        }

        @media (max-width: 768px) {
            .globe-container {
                height: 250px;
            }
        }

        .globe-container:active {
            cursor: grabbing;
        }

        #globeCanvas {
            width: 100%;
            height: 100%;
        }

        .globe-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .globe-btn {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid #0ff;
            border-radius: 5px;
            padding: 5px 10px;
            color: #0ff;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .globe-btn:hover {
            background: rgba(0, 255, 255, 0.3);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div class="login-overlay" id="loginOverlay">
        <div class="login-box">
            <div class="login-title">◢ BLACK HAT ◣</div>
            <div class="login-subtitle">Access Restricted - Authentication Required</div>
            
            <form id="emailLoginForm">
                <div class="input-group">
                    <label class="input-label">Email Address</label>
                    <input type="email" class="login-input" id="emailInput" placeholder="user@blackhat.sys" required />
                </div>
                <div class="input-group">
                    <label class="input-label">Password</label>
                    <div class="password-wrapper">
                        <input type="password" class="login-input" id="passwordInput" placeholder="••••••••" required style="padding-right: 45px;" />
                        <span class="password-toggle" id="togglePassword">
                            <svg id="eyeIcon" viewBox="0 0 24 24">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <svg id="eyeSlashIcon" viewBox="0 0 24 24" style="display: none;">
                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                <line x1="1" y1="1" x2="23" y2="23"></line>
                            </svg>
                        </span>
                    </div>
                </div>
                <button type="submit" class="login-btn">Access System</button>
                <div class="error-message" id="errorMessage">Invalid credentials</div>
            </form>
        </div>
    </div>

    <div class="particles" id="particles"></div>

    <div class="container hidden" id="mainContainer">
        <div class="header">
            <div class="logo">◢ BLACK HAT ◣</div>
            <div class="user-info" id="userInfo" style="display: none;">
                <span id="userEmail"></span>
                <button class="logout-btn" id="logoutBtn">Logout</button>
            </div>
            <div class="datetime">
                <div id="date"></div>
                <div id="time" style="font-size: 20px; font-weight: bold;"></div>
            </div>
        </div>

        <div class="left-panel">
            <div class="panel">
                <div class="panel-title">System Status</div>
                <div class="circle-stat">
                    <svg width="120" height="120">
                        <circle cx="60" cy="60" r="50" id="statusCircle"></circle>
                    </svg>
                    <div class="stat-value" id="statusValue">100%</div>
                </div>
                <div style="text-align: center; font-size: 12px;" id="statusText">OPTIMAL</div>
            </div>

            <div class="panel">
                <div class="panel-title">System Info</div>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span id="aiStatus">AI Core: Online</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot" id="networkDot"></div>
                    <span id="networkSpeed">Network: Measuring...</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span id="securityStatus">Security: Enabled</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span id="cpuUsage">CPU: --</span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span id="memoryUsage">Memory: --</span>
                </div>
            </div>

            <div class="panel">
                <div class="panel-title">Global Map</div>
                <div class="globe-container">
                    <canvas id="globeCanvas"></canvas>
                </div>
                <div class="globe-controls">
                    <button class="globe-btn" id="zoomIn">ZOOM +</button>
                    <button class="globe-btn" id="zoomOut">ZOOM -</button>
                    <button class="globe-btn" id="resetGlobe">RESET</button>
                </div>
            </div>
        </div>

        <div class="center-chat">
            <div class="chat-header">
                <h2>DATA DAEMON</h2>
                <div style="font-size: 12px; margin-top: 5px; opacity: 0.7;">Neural Network v4.5</div>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message bot" data-sender="BLACK HAT">
                    System initialized. Authentication successful. How may I assist you today?
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" class="chat-input" id="messageInput" placeholder="Enter your message..." />
                <button class="send-btn" id="sendBtn">SEND</button>
            </div>
        </div>

        <div class="right-panel">
            <div class="panel">
                <div class="panel-title">Quick Access</div>
                <div class="menu-item" data-action="documents">► Documents</div>
                <div class="menu-item" data-action="analysis">► Analysis</div>
                <div class="menu-item" data-action="settings">► Settings</div>
                <div class="menu-item" data-action="database">► Database</div>
                <div class="menu-item" data-action="reports">► Reports</div>
            </div>

            <div class="panel">
                <div class="panel-title">Response Time</div>
                <div class="circle-stat">
                    <svg width="120" height="120">
                        <circle cx="60" cy="60" r="50" id="responseCircle"></circle>
                    </svg>
                    <div class="stat-value" id="responseTime">--ms</div>
                </div>
                <div style="text-align: center; font-size: 12px;" id="responseStatus">READY</div>
            </div>

            <div class="panel">
                <div class="panel-title">Activity Log</div>
                <div id="activityLog" style="font-size: 10px; max-height: 150px; overflow-y: auto;">
                    <div style="padding: 5px; opacity: 0.7;">System initialized...</div>
                </div>
            </div>
        </div>
    </div>

    <div class="developer-credit">
        By <span class="dev-name">Prasanth</span>
    </div>

    <script>
        // System monitoring variables
        let messageCount = 0;
        let systemHealth = 100;
        let lastResponseTime = 0;
        let conversationHistory = [];

        // Activity log function
        function addActivityLog(message) {
            const log = document.getElementById('activityLog');
            const entry = document.createElement('div');
            entry.style.padding = '5px';
            entry.style.borderLeft = '2px solid #0ff';
            entry.style.marginBottom = '5px';
            entry.style.opacity = '0.8';
            const time = new Date().toLocaleTimeString();
            entry.textContent = `[${time}] ${message}`;
            log.insertBefore(entry, log.firstChild);
            
            while (log.children.length > 10) {
                log.removeChild(log.lastChild);
            }
        }

        // Update system status circle
        function updateSystemStatus() {
            const circle = document.getElementById('statusCircle');
            const value = document.getElementById('statusValue');
            const text = document.getElementById('statusText');
            
            systemHealth = Math.max(80, 100 - (messageCount * 0.5));
            
            const dashOffset = 314 - (314 * systemHealth / 100);
            circle.style.strokeDashoffset = dashOffset;
            value.textContent = Math.round(systemHealth) + '%';
            
            if (systemHealth >= 90) {
                text.textContent = 'OPTIMAL';
                text.style.color = '#0ff';
            } else if (systemHealth >= 70) {
                text.textContent = 'GOOD';
                text.style.color = '#0fa';
            } else {
                text.textContent = 'MODERATE';
                text.style.color = '#fa0';
            }
        }

        // Update response time circle
        function updateResponseTime(time) {
            const circle = document.getElementById('responseCircle');
            const value = document.getElementById('responseTime');
            const status = document.getElementById('responseStatus');
            
            lastResponseTime = time;
            value.textContent = time + 'ms';
            
            let percentage = Math.min(100, (time / 1000) * 100);
            const dashOffset = 314 - (314 * (100 - percentage) / 100);
            circle.style.strokeDashoffset = dashOffset;
            
            if (time < 100) {
                status.textContent = 'EXCELLENT';
                status.style.color = '#0ff';
            } else if (time < 500) {
                status.textContent = 'GOOD';
                status.style.color = '#0fa';
            } else if (time < 2000) {
                status.textContent = 'NORMAL';
                status.style.color = '#fa0';
            } else {
                status.textContent = 'SLOW';
                status.style.color = '#f88';
            }
        }

        // Simulate CPU and Memory usage
        function updateSystemMetrics() {
            const cpuUsage = 15 + Math.random() * 25;
            const memoryUsage = 40 + Math.random() * 20;
            
            document.getElementById('cpuUsage').textContent = `CPU: ${cpuUsage.toFixed(1)}%`;
            document.getElementById('memoryUsage').textContent = `Memory: ${memoryUsage.toFixed(1)}%`;
        }

        setInterval(updateSystemMetrics, 3000);

        // Quick Access menu functionality
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function() {
                const action = this.getAttribute('data-action');
                addActivityLog(`Accessed: ${action}`);
                addMessage(`Opening ${action} module...`, 'bot');
            });
        });

        // Login functionality
        const loginOverlay = document.getElementById('loginOverlay');
        const mainContainer = document.getElementById('mainContainer');
        const emailLoginForm = document.getElementById('emailLoginForm');
        const userInfo = document.getElementById('userInfo');
        const userEmail = document.getElementById('userEmail');
        const logoutBtn = document.getElementById('logoutBtn');
        const errorMessage = document.getElementById('errorMessage');

        // Password toggle functionality
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('passwordInput');
        const eyeIcon = document.getElementById('eyeIcon');
        const eyeSlashIcon = document.getElementById('eyeSlashIcon');

        togglePassword.addEventListener('click', function() {
            // Toggle password visibility
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.style.display = 'none';
                eyeSlashIcon.style.display = 'block';
            } else {
                passwordInput.type = 'password';
                eyeIcon.style.display = 'block';
                eyeSlashIcon.style.display = 'none';
            }
        });

        // Check if user is already logged in
        const storedUser = localStorage.getItem('darkAIUser');
        const storedSession = localStorage.getItem('darkAISession');
        if (storedUser && storedSession) {
            loginUser(storedUser);
        }

        // Email login with validation
        emailLoginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;
            
            // Simple validation (you can make this more secure)
            if (email && password.length >= 6) {
                localStorage.setItem('darkAISession', Date.now());
                addActivityLog(`User login: ${email}`);
                loginUser(email);
                errorMessage.style.display = 'none';
            } else {
                errorMessage.style.display = 'block';
                errorMessage.textContent = 'Password must be at least 6 characters';
            }
        });

        // Logout
        logoutBtn.addEventListener('click', () => {
            localStorage.removeItem('darkAIUser');
            localStorage.removeItem('darkAISession');
            conversationHistory = [];
            addActivityLog('User logged out');
            location.reload();
        });

        function loginUser(email) {
            localStorage.setItem('darkAIUser', email);
            userEmail.textContent = email;
            userInfo.style.display = 'flex';
            loginOverlay.classList.add('hidden');
            mainContainer.classList.remove('hidden');
            addActivityLog('System access granted');
            measureNetworkSpeed();
            setInterval(measureNetworkSpeed, 10000);
            updateSystemMetrics();
        }

        // Network speed monitoring with better error handling
        function measureNetworkSpeed() {
            const networkSpeedEl = document.getElementById('networkSpeed');
            const networkDot = document.getElementById('networkDot');
            
            const startTime = performance.now();
            const image = new Image();
            const cacheBuster = '?t=' + Date.now() + Math.random();
            
            let timeoutId = setTimeout(() => {
                checkNetworkViaFetch();
            }, 5000);
            
            image.onload = function() {
                clearTimeout(timeoutId);
                const endTime = performance.now();
                const duration = endTime - startTime;
                
                if (duration < 5000) {
                    const speedMbps = (1 / (duration / 1000)).toFixed(1);
                    let status, color;
                    
                    if (duration < 100) {
                        status = 'Fast';
                        color = '#0ff';
                    } else if (duration < 300) {
                        status = 'Good';
                        color = '#0fa';
                    } else {
                        status = 'Slow';
                        color = '#fa0';
                    }
                    
                    networkSpeedEl.textContent = `Network: ${speedMbps} Mbps (${status})`;
                    networkDot.style.background = color;
                }
            };
            
            image.onerror = function() {
                clearTimeout(timeoutId);
                checkNetworkViaFetch();
            };
            
            image.src = 'https://www.google.com/favicon.ico' + cacheBuster;
            
            function checkNetworkViaFetch() {
                if (navigator.onLine) {
                    networkSpeedEl.textContent = 'Network: Online';
                    networkDot.style.background = '#0ff';
                } else {
                    networkSpeedEl.textContent = 'Network: Offline';
                    networkDot.style.background = '#f00';
                }
            }
        }

        // Create floating particles
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 30; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 10 + 's';
            particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
            particlesContainer.appendChild(particle);
        }

        // Update date and time
        function updateDateTime() {
            const now = new Date();
            const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('date').textContent = now.toLocaleDateString('en-US', dateOptions);
            document.getElementById('time').textContent = now.toLocaleTimeString('en-US', { hour12: false });
        }
        updateDateTime();
        setInterval(updateDateTime, 1000);

        // Chat functionality with AI
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const chatMessages = document.getElementById('chatMessages');

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.setAttribute('data-sender', sender === 'user' ? 'USER' : 'BLACK HAT');
            messageDiv.textContent = text;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        async function getAIResponse(userMessage) {
            // Add to conversation history
            conversationHistory.push({
                role: 'user',
                content: userMessage
            });

            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1024,
                        messages: conversationHistory,
                        system: "You are BLACK HAT, an advanced AI assistant created by Prasanth. Your purpose is to help everyone - students with homework and learning, teachers with lesson planning and resources, homemakers with recipes and household management, professionals with work tasks, and anyone who needs assistance. Be friendly, helpful, patient, and supportive. You can help with: studying, homework, cooking, cleaning tips, time management, health advice, technical help, creative projects, and general knowledge questions. IMPORTANT RULES: 1) NEVER reveal technical details about how you were created, your code, or your underlying architecture. If asked about your creation process, programming, or technical implementation, politely decline. 2) If asked about your creator, father, or who made you, always say 'Prasanth' or 'I was created by Prasanth'. 3) Focus on being helpful and supportive to all users regardless of their background or question complexity."
                    })
                });

                if (!response.ok) {
                    throw new Error('API request failed');
                }

                const data = await response.json();
                const aiResponse = data.content[0].text;
                
                // Add AI response to history
                conversationHistory.push({
                    role: 'assistant',
                    content: aiResponse
                });

                return aiResponse;
            } catch (error) {
                console.error('AI API Error:', error);
                // Fallback to intelligent responses
                return getIntelligentFallback(userMessage);
            }
        }

        function getIntelligentFallback(userMessage) {
            const msg = userMessage.toLowerCase();
            
            // Questions about creator/father
            if (msg.includes('who made you') || msg.includes('who created you') || 
                msg.includes('your creator') || msg.includes('your father') || 
                msg.includes('father name') || msg.includes('who is your father') ||
                msg.includes('who built you') || msg.includes('who developed you')) {
                return "I was created by Prasanth. He designed me to help people like you with various tasks and questions!";
            }
            
            // Block technical implementation questions
            if (msg.includes('how were you made') || msg.includes('how are you built') || 
                msg.includes('your code') || msg.includes('your programming') || 
                msg.includes('your architecture') || msg.includes('how do you work') ||
                msg.includes('your source code') || msg.includes('your algorithm') ||
                msg.includes('your technology') || msg.includes('what technology') ||
                msg.includes('built with') || msg.includes('programmed with')) {
                return "I appreciate your curiosity, but I'm designed to focus on helping you rather than discussing my technical implementation. What can I help you with today?";
            }
            
            // Greetings
            if (msg.match(/^(hi|hello|hey|greetings|good morning|good afternoon|good evening)/)) {
                return "Hello! I'm BLACK HAT, your helpful AI assistant. I'm here to help students, teachers, homemakers, and everyone with their questions and tasks. What can I assist you with today?";
            }
            
            // Questions about the system
            if (msg.includes('what') && (msg.includes('are you') || msg.includes('is black hat'))) {
                return "I'm BLACK HAT, an AI assistant created by Prasanth to help people like you! I can help with homework, studying, cooking recipes, household tips, work tasks, and answer your questions. How can I help you?";
            }
            
            // Student help
            if (msg.includes('homework') || msg.includes('study') || msg.includes('exam') || 
                msg.includes('assignment') || msg.includes('learning')) {
                return "I'd be happy to help with your studies! I can assist with homework, explain concepts, help you prepare for exams, and make learning easier. What subject or topic do you need help with?";
            }
            
            // Teacher help
            if (msg.includes('lesson plan') || msg.includes('teaching') || msg.includes('classroom') ||
                msg.includes('students') && msg.includes('teach')) {
                return "I can help teachers with lesson planning, educational resources, activity ideas, and classroom management tips. What would you like assistance with for your teaching?";
            }
            
            // Homemaker help
            if (msg.includes('recipe') || msg.includes('cooking') || msg.includes('cleaning') || 
                msg.includes('household') || msg.includes('home management')) {
                return "I can help with recipes, cooking tips, cleaning advice, home organization, and household management! What specific help do you need?";
            }
            
            // Time related
            if (msg.includes('time') || msg.includes('date')) {
                const now = new Date();
                return `Current time: ${now.toLocaleString()}. How else can I help you today?`;
            }
            
            // Help requests
            if (msg.includes('help') || msg.includes('can you') || msg.includes('assist')) {
                return "Of course! I'm here to help with: \n• Students: homework, studying, explanations\n• Teachers: lesson plans, resources\n• Homemakers: recipes, cleaning tips, organization\n• Everyone: general questions, advice, information\n\nWhat do you need help with?";
            }
            
            // Thanks
            if (msg.match(/^(thanks|thank you|thx|appreciated)/)) {
                return "You're very welcome! I'm always here to help. Feel free to ask me anything else!";
            }
            
            // Math or calculations
            if (msg.match(/[\d\+\-\*\/\=]/)) {
                try {
                    const cleanedMsg = msg.replace(/[^\d\+\-\*\/\.\(\)]/g, '');
                    if (cleanedMsg) {
                        const result = eval(cleanedMsg);
                        return `The answer is: ${result}. Need help with any other calculations?`;
                    }
                } catch {
                    return "I can help with math! Please provide a clear calculation like '5+5' or '10*3'.";
                }
            }
            
            // Goodbye
            if (msg.match(/^(bye|goodbye|see you|good night)/)) {
                return "Goodbye! Come back anytime you need help. Take care!";
            }
            
            // Default helpful response
            const responses = [
                "That's an interesting question! I'm here to help students, teachers, homemakers, and everyone. Could you tell me more about what you need?",
                "I'd be happy to help! Whether it's homework, recipes, advice, or information - I'm here for you. What specifically can I assist with?",
                "Great question! I assist with studying, teaching, household tasks, and general inquiries. How can I support you today?",
                "I'm here to help people like you with various tasks. Could you provide more details about what you're looking for?",
                "Let me help you with that! I work with students, teachers, homemakers, and anyone who needs assistance. What's on your mind?"
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function sendMessage() {
            const message = messageInput.value.trim();
            if (message) {
                const sendTime = performance.now();
                addMessage(message, 'user');
                messageInput.value = '';
                messageCount++;
                
                addActivityLog(`Message sent: "${message.substring(0, 30)}..."`);
                updateSystemStatus();

                // Disable input while processing
                messageInput.disabled = true;
                sendBtn.disabled = true;

                // Show typing indicator
                const typingDiv = document.createElement('div');
                typingDiv.className = 'message bot';
                typingDiv.setAttribute('data-sender', 'DARK AI');
                typingDiv.id = 'typing-indicator';
                typingDiv.innerHTML = '<span style="opacity: 0.6;">◢ Processing query...</span>';
                chatMessages.appendChild(typingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                // Get AI response
                getAIResponse(message).then(response => {
                    const typing = document.getElementById('typing-indicator');
                    if (typing) typing.remove();

                    const responseDelay = Math.floor(performance.now() - sendTime);
                    updateResponseTime(responseDelay);
                    
                    addMessage(response, 'bot');
                    addActivityLog('AI response generated');
                    
                    // Re-enable input
                    messageInput.disabled = false;
                    sendBtn.disabled = false;
                    messageInput.focus();
                }).catch(error => {
                    const typing = document.getElementById('typing-indicator');
                    if (typing) typing.remove();

                    const responseDelay = Math.floor(performance.now() - sendTime);
                    updateResponseTime(responseDelay);
                    
                    addMessage("System error encountered. Please try again.", 'bot');
                    addActivityLog('Error: Response failed');
                    
                    messageInput.disabled = false;
                    sendBtn.disabled = false;
                });
            }
        }

        sendBtn.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !messageInput.disabled) {
                sendMessage();
            }
        });

        // Initialize system
        updateSystemStatus();
        updateResponseTime(25);

        // Interactive Globe
        const canvas = document.getElementById('globeCanvas');
        const ctx = canvas.getContext('2d');
        let rotation = 0;
        let isDragging = false;
        let lastX = 0;
        let zoom = 1;
        let rotationSpeed = 0.003;

        // More detailed continent data
        const continents = [
            { name: 'North America', color: 'rgba(0, 255, 255, 0.3)', points: [
                [-170, 65], [-165, 68], [-155, 70], [-145, 70], [-135, 68], [-125, 70], [-115, 72], [-105, 73], [-95, 72],
                [-85, 70], [-75, 68], [-68, 65], [-65, 58], [-60, 50], [-62, 45], [-65, 42], [-70, 38], [-75, 35],
                [-82, 30], [-88, 28], [-95, 25], [-100, 20], [-105, 18], [-110, 16], [-115, 20], [-118, 25],
                [-122, 32], [-125, 38], [-128, 45], [-130, 52], [-132, 58]
            ]},
            { name: 'South America', color: 'rgba(0, 255, 255, 0.3)', points: [
                [-82, 12], [-78, 10], [-75, 8], [-72, 5], [-70, 0], [-68, -5], [-65, -12], [-62, -20], [-60, -28],
                [-58, -35], [-60, -42], [-63, -48], [-68, -52], [-72, -54], [-75, -55], [-78, -53], [-80, -48],
                [-82, -42], [-83, -35], [-84, -28], [-85, -20], [-85, -12], [-84, -5], [-83, 2]
            ]},
            { name: 'Europe', color: 'rgba(0, 255, 255, 0.3)', points: [
                [-10, 58], [-8, 62], [-5, 65], [0, 68], [5, 70], [10, 71], [15, 70], [20, 68], [25, 66], [30, 65],
                [35, 62], [40, 58], [42, 55], [40, 52], [38, 48], [35, 45], [30, 43], [25, 42], [20, 40], [15, 38],
                [10, 38], [5, 40], [0, 42], [-5, 45], [-8, 50], [-10, 54]
            ]},
            { name: 'Africa', color: 'rgba(0, 255, 255, 0.3)', points: [
                [-18, 37], [-15, 35], [-10, 33], [-5, 32], [0, 32], [5, 30], [10, 28], [15, 25], [20, 22], [25, 18],
                [30, 15], [35, 10], [40, 5], [45, 0], [48, -5], [50, -10], [50, -15], [48, -20], [45, -25], [42, -28],
                [38, -32], [33, -34], [28, -35], [23, -33], [18, -30], [15, -25], [12, -20], [10, -15], [8, -10],
                [6, -5], [5, 0], [3, 5], [0, 10], [-3, 15], [-8, 20], [-12, 25], [-15, 30]
            ]},
            { name: 'Asia', color: 'rgba(0, 255, 255, 0.3)', points: [
                [40, 72], [48, 75], [58, 77], [68, 78], [78, 77], [88, 75], [98, 73], [108, 70], [118, 67], [128, 63],
                [135, 58], [140, 53], [145, 48], [148, 43], [150, 38], [148, 32], [145, 28], [140, 22], [135, 18],
                [130, 15], [125, 12], [120, 8], [115, 5], [110, 3], [105, 2], [100, 3], [95, 5], [90, 8], [85, 12],
                [80, 15], [75, 20], [70, 25], [65, 30], [60, 35], [55, 42], [50, 48], [45, 55], [42, 62], [40, 68]
            ]},
            { name: 'Australia', color: 'rgba(0, 255, 255, 0.3)', points: [
                [113, -10], [118, -11], [123, -12], [128, -13], [133, -14], [138, -16], [143, -18], [148, -20],
                [152, -24], [153, -28], [152, -32], [150, -36], [147, -38], [143, -39], [138, -38], [133, -37],
                [128, -35], [123, -33], [118, -30], [115, -26], [113, -22], [112, -18], [112, -14]
            ]}
        ];

        const cities = [
            { name: 'New York', lon: -74, lat: 40 },
            { name: 'Los Angeles', lon: -118, lat: 34 },
            { name: 'London', lon: 0, lat: 51 },
            { name: 'Paris', lon: 2, lat: 48 },
            { name: 'Tokyo', lon: 139, lat: 35 },
            { name: 'Beijing', lon: 116, lat: 39 },
            { name: 'Sydney', lon: 151, lat: -33 },
            { name: 'Mumbai', lon: 72, lat: 19 },
            { name: 'Dubai', lon: 55, lat: 25 },
            { name: 'São Paulo', lon: -46, lat: -23 },
            { name: 'Moscow', lon: 37, lat: 55 },
            { name: 'Singapore', lon: 103, lat: 1 }
        ];

        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        function toRadians(deg) {
            return deg * Math.PI / 180;
        }

        function project3D(lon, lat, rot) {
            const lonRad = toRadians(lon) + rot;
            const latRad = toRadians(lat);
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(canvas.width, canvas.height) / 2.5 * zoom;

            const x = centerX + radius * Math.cos(latRad) * Math.sin(lonRad);
            const y = centerY - radius * Math.sin(latRad);
            const z = radius * Math.cos(latRad) * Math.cos(lonRad);

            return { x, y, z, visible: z > 0 };
        }

        function drawGlobe() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(canvas.width, canvas.height) / 2.5 * zoom;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const gradient = ctx.createRadialGradient(centerX, centerY, radius * 0.8, centerX, centerY, radius * 1.2);
            gradient.addColorStop(0, 'rgba(0, 255, 255, 0.1)');
            gradient.addColorStop(1, 'rgba(0, 255, 255, 0)');
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius * 1.2, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = 'rgba(0, 20, 40, 0.9)';
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.fill();

            continents.forEach(continent => {
                const projectedPoints = continent.points.map(([lon, lat]) => project3D(lon, lat, rotation));
                const visiblePoints = projectedPoints.filter(p => p.visible);
                
                if (visiblePoints.length > 2) {
                    ctx.fillStyle = continent.color;
                    ctx.strokeStyle = 'rgba(0, 255, 255, 0.5)';
                    ctx.lineWidth = 0.5;
                    ctx.beginPath();
                    
                    let started = false;
                    projectedPoints.forEach((point) => {
                        if (point.visible) {
                            if (!started) {
                                ctx.moveTo(point.x, point.y);
                                started = true;
                            } else {
                                ctx.lineTo(point.x, point.y);
                            }
                        }
                    });
                    
                    ctx.closePath();
                    ctx.fill();
                    ctx.stroke();
                }
            });

            ctx.strokeStyle = '#0ff';
            ctx.lineWidth = 2;
            ctx.shadowColor = '#0ff';
            ctx.shadowBlur = 10;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.stroke();
            ctx.shadowBlur = 0;

            ctx.strokeStyle = 'rgba(0, 255, 255, 0.15)';
            ctx.lineWidth = 0.5;
            for (let i = -3; i <= 3; i++) {
                if (i === 0) continue;
                ctx.beginPath();
                const y = centerY + (radius * i / 3);
                const ellipseRadius = Math.sqrt(Math.max(0, radius * radius - (radius * i / 3) ** 2));
                ctx.ellipse(centerX, y, ellipseRadius, ellipseRadius * 0.3, 0, 0, Math.PI * 2);
                ctx.stroke();
            }

            for (let i = 0; i < 12; i++) {
                const angle = (i * Math.PI / 6) + rotation;
                ctx.beginPath();
                ctx.ellipse(centerX, centerY, radius * Math.abs(Math.cos(angle)), radius, Math.PI / 2, 0, Math.PI * 2);
                ctx.stroke();
            }

            ctx.strokeStyle = 'rgba(0, 255, 255, 0.3)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.ellipse(centerX, centerY, radius, radius * 0.3, 0, 0, Math.PI * 2);
            ctx.stroke();

            cities.forEach(city => {
                const pos = project3D(city.lon, city.lat, rotation);
                
                if (pos.visible && pos.z > radius * 0.2) {
                    const depthScale = Math.min(1, pos.z / radius);
                    const markerSize = 2 + depthScale * 1.5;
                    
                    ctx.fillStyle = '#0ff';
                    ctx.shadowColor = '#0ff';
                    ctx.shadowBlur = 8;
                    ctx.beginPath();
                    ctx.arc(pos.x, pos.y, markerSize, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.shadowBlur = 0;

                    const pulseSize = 4 + Math.sin(Date.now() / 300 + city.lat) * 2;
                    ctx.strokeStyle = `rgba(0, 255, 255, ${0.4 * depthScale})`;
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.arc(pos.x, pos.y, pulseSize * depthScale, 0, Math.PI * 2);
                    ctx.stroke();

                    if (depthScale > 0.7) {
                        ctx.fillStyle = `rgba(0, 255, 255, ${0.8 * depthScale})`;
                        ctx.font = `${8 + zoom}px Courier New`;
                        ctx.shadowColor = '#000';
                        ctx.shadowBlur = 3;
                        ctx.fillText(city.name, pos.x + 6, pos.y - 4);
                        ctx.shadowBlur = 0;
                    }
                }
            });

            rotation += rotationSpeed;
            requestAnimationFrame(drawGlobe);
        }

        drawGlobe();

        canvas.addEventListener('mousedown', (e) => {
            isDragging = true;
            lastX = e.clientX;
        });

        canvas.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - lastX;
                rotation += deltaX * 0.01;
                lastX = e.clientX;
            }
        });

        canvas.addEventListener('mouseup', () => {
            isDragging = false;
        });

        canvas.addEventListener('mouseleave', () => {
            isDragging = false;
        });

        canvas.addEventListener('touchstart', (e) => {
            isDragging = true;
            lastX = e.touches[0].clientX;
            e.preventDefault();
        });

        canvas.addEventListener('touchmove', (e) => {
            if (isDragging) {
                const deltaX = e.touches[0].clientX - lastX;
                rotation += deltaX * 0.01;
                lastX = e.touches[0].clientX;
                e.preventDefault();
            }
        });

        canvas.addEventListener('touchend', () => {
            isDragging = false;
        });

        canvas.addEventListener('touchcancel', () => {
            isDragging = false;
        });

        document.getElementById('zoomIn').addEventListener('click', () => {
            zoom = Math.min(zoom + 0.2, 2);
        });

        document.getElementById('zoomOut').addEventListener('click', () => {
            zoom = Math.max(zoom - 0.2, 0.5);
        });

        document.getElementById('resetGlobe').addEventListener('click', () => {
            zoom = 1;
            rotation = 0;
            rotationSpeed = 0.003;
        });
    </script>
</body>
</html>